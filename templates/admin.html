<!DOCTYPE html>
    
  <head>
    <meta http-equiv="refresh" content="10">
  <style>
    .center{
        text-align: center
    }
    table, th, td {
        border: 1px solid black;
        border-collapse: collapse;
        margin-left: auto;
        margin-right: auto;
        margin-top: 10px;
        margin-bottom: 10px;
        padding: 10px;
        
    }
  </style>
    <title>Admin</title>
  </head>
      
  <body>
    <div class="center">
        <table>
            {% if persons|length < 1 %}
            <p>THERE ARE NO PERSONS!</p>
            {% else %}
            <tr>
                <th>Person</th>
                <th>Points</th>
                <th>Action</th>
            </tr>
            {% for person in persons %}
            <tr>
                <td>
                {{ person.name }}
                </td>
                <td>
                {{ person.points }}
                </td>
                <td>

                    <a href="/deleteperson/{{person.name}}">Delete</a>
                <!-- <form action="#" method="POST">
                    <input type="hidden" value="persondelete" name="request">
                    <input type="hidden" value="{{ person.id }}" name="person">
                    <input type="submit" value="Delete">
                </form> -->
                </td>
            </tr>
            {% endfor %}
            {% endif %}
        </table>
    </div>
    <div class="center">
        <table>
            {% if flags|length < 1 %}
            <p>THERE ARE NO FLAGS!</p>
            {% else %}
            <tr>
                <th>Flag</th>
                <th>Points</th>
                {% if flags|length > 0 %}
                {% for person in persons %}
                <th>{{person.name}}</th>
                {% endfor %}
                {% endif %}
            </tr>
            {% for flag in flags %}
            <tr>
                <td>
                {{ flag.flag }}
                </td>
                <td>
                {{ flag.points }}
                </td>
                {% if flags|length > 0 %}
                    {% for person in persons %}
                    {% set ns = namespace(passed=false) %}
                    {% for p in flag.persons.split("ï¿½") %}
                            {% if p == person.name %}
                            {% set ns.passed = true %}
                            {% endif %}
                        {% endfor %}
                        {% if ns.passed == true %}
                            <td style="background-color: green;">
                            <p>&#10003 {{person.name}}</p>
                            </td>
                        {% else %}
                            <td style="background-color: red;">
                            <p>&#10005 {{person.name}}</p>
                            </td>
                        {% endif %}
                    {% endfor %}
                {% endif %}
                
                <td>

                    <a href="/deleteflag/{{flag.id}}">Delete</a>
                <!-- <form action="#" method="POST">
                    <input type="hidden" value="flagdelete" name="request">
                    <input type="hidden" value="{{ flag.id }}" name="flag">
                    <input type="submit" value="Delete">
                </form> -->
                </td>
            </tr>
            {% endfor %}
            {% endif %}
        </table>
    </div>
    <div class="center">
        <form action="" method="POST">
            <input type="hidden" value="flagadd" name="request">
            Flag: <input type="text" value="FLAG{...}" name="flag">
            Points: <input type="text" value="0" name="points">
            <input type="submit" value="Add Flag">
        </form>
    </div>
  </body>